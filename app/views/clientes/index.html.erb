<%= javascript_pack_tag 'funcional' %>

<div class="row">
  <h1 class="offset-2 col-2 offset-sm-3 col-sm-9">Clientes</h1>
</div>


<div class="row mb-3">
  <div class="offset-3 col-1 offset-sm-3 col-sm-1">
    <%= link_to 'Nuevo Cliente', new_cliente_path, :class => 'btn btn-primary' %>
  </div>
  <div class="col-1 col-sm-1">
    <%= link_to 'Descargar Lista de Clientes', url_options = {format: 'csv'}, html_options = {class: 'btn btn-secondary'} %>
  </div>
  <div class="col-1 col-sm-1">
    <%= link_to 'Clientes Dados de Baja', bajas_clientes_path, :class => 'btn btn-secondary'%>
  </div>
</div>
<hr>
<div>
  <% @clientes.each do |cliente| %>
    <div class="row mb-3">
      <div class="offset-1 col-1 offset-sm-1 col-sm-1" style="text-align: right">
        <%= cliente.num_interno%>
      </div>
      <div class="col-2 col-sm-2">
        <%= cliente.razon_social%>
      </div>
      <div class="col-2 col-sm-2"> 
        <div class="row mb-3">
          <button onclick = "copyToClipboard(event)" class="btn btn-warning">RFC: <%= cliente.rfc%></button>
        </div>
        <div class="row mb-3">
          <button onclick = "copyToClipboard(event)" class="btn btn-warning">CIEC: <%= cliente.clave%></button>
        </div>
        <div class="row mb-3">
          <button onclick = "copyToClipboard(event)" class="btn btn-warning">FIEL: <%= cliente.fiel%></button>
        </div>
      </div>
      <div class="col-1 col-sm-1">
        <%= link_to '+ Info y Editar', cliente, :class => 'btn btn-primary' %>
      </div>
      <div class="col-1 col-sm-1">
        <%= link_to 'Dar de baja', cliente_path(id: cliente.id, :cliente => {:num_interno => nil}), method: :patch, :class => 'btn btn-secondary',
        data: { confirm: "Se dará de baja al cliente #{cliente.razon_social}."}%>
      </div>
      <% if usuario_actual.admin? %>
      <div class="col-1 col-sm-1">
        <%= link_to 'Eliminar', cliente, method: :delete, :class => "btn btn-danger", data: { confirm: '¿Estás seguro?' } %>
      </div>
      <% end %>
    </div>
    <br>
  <% end %>
</div>

